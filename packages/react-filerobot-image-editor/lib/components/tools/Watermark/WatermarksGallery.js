"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _react=_interopRequireWildcard(require("react")),_hooks=require("../../../hooks"),_constants=require("../../../utils/constants"),_Carousel=_interopRequireDefault(require("../../common/Carousel")),_actions=require("../../../actions"),_Watermark=require("./Watermark.styled");function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}function _interopRequireWildcard(b,c){if(!c&&b&&b.__esModule)return b;if(null===b||"object"!=_typeof(b)&&"function"!=typeof b)return{default:b};var d=_getRequireWildcardCache(c);if(d&&d.has(b))return d.get(b);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in b)if("default"!=a&&Object.prototype.hasOwnProperty.call(b,a)){var g=f?Object.getOwnPropertyDescriptor(b,a):null;g&&(g.get||g.set)?Object.defineProperty(e,a,g):e[a]=b[a]}return e["default"]=b,d&&d.set(b,e),e}var WatermarksGallery=function(a){var b=a.addImgWatermark,c=a.loadAndSetWatermarkImg,d=a.style,e=(0,_hooks.useStore)(),f=e.config,g=e.annotations,h=e.dispatch,i=e.t,j=(0,_react.useMemo)(function(){var a;return null===(a=(g[_constants.WATERMARK_ANNOTATION_ID]||{}).image)||void 0===a?void 0:a.src},[g[_constants.WATERMARK_ANNOTATION_ID]]),k=function(a){var c=a.currentTarget.children[0];if(c.complete){if(!c.naturalWidth)return void h({type:_actions.SET_FEEDBACK,payload:{feedback:{message:i("mutualizedFailedToLoadImg"),duration:2e3}}});b(c)}},l=f[_constants.TOOLS_IDS.WATERMARK]||{},m=l.gallery,n=void 0===m?[]:m;return 0===n.length?null:_react["default"].createElement(_Carousel["default"],{className:"FIE_watermark-gallery",style:d},n.map(function(a){var b=(null===a||void 0===a?void 0:a.url)||a,d=(null===a||void 0===a?void 0:a.previewUrl)||b;return _react["default"].createElement(_Watermark.StyledWatermarkGalleryItem,{className:"FIE_watermark-selected-item",onClick:function onClick(a){return b===d?k(a):c(b)},key:b,"aria-selected":b===j},_react["default"].createElement("img",{src:d,alt:"Failed to load.",crossOrigin:"Anonymous",draggable:!1}))}))};WatermarksGallery.defaultProps={style:void 0};var _default=exports["default"]=WatermarksGallery;