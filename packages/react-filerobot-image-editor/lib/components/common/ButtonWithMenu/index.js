"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_react=_interopRequireWildcard(require("react")),_menuItem=require("@scaleflex/ui/core/menu-item"),_hooks=require("../../../hooks"),_ButtonWithMenu=require("./ButtonWithMenu.styled");function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}function _interopRequireWildcard(b,c){if(!c&&b&&b.__esModule)return b;if(null===b||"object"!=_typeof(b)&&"function"!=typeof b)return{default:b};var d=_getRequireWildcardCache(c);if(d&&d.has(b))return d.get(b);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in b)if("default"!=a&&Object.prototype.hasOwnProperty.call(b,a)){var g=f?Object.getOwnPropertyDescriptor(b,a):null;g&&(g.get||g.set)?Object.defineProperty(e,a,g):e[a]=b[a]}return e["default"]=b,d&&d.set(b,e),e}var ButtonWithMenu=function(a){var b=a.onClick,c=a.title,d=a.label,e=a.color,f=a.menuFromBtn,g=a.menuItems,h=a.menuPosition,i=void 0===h?"bottom":h,j=a.disabled,k=void 0!==j&&j,l=a.className,m=a.menuStyle,n=a.wrapperStyle,o=a.buttonRef,p=a.noMargin,q=(0,_hooks.useStore)(),r=q.t,s=(0,_react.useRef)(!0),t=(0,_react.useState)(null),u=(0,_slicedToArray2["default"])(t,2),v=u[0],w=u[1],x="sm",y=g.filter(Boolean),z=1<y.length,A=function(a){s.current&&w(a.currentTarget)},B=function(){s.current&&w(null)},C=function(a){"function"==typeof a&&a(),B()};return(0,_react.useEffect)(function(){return s.current=!0,function(){s.current=!1}},[]),_react["default"].createElement(_react["default"].Fragment,null,_react["default"].createElement(_ButtonWithMenu.StyledButtonWrapper,{className:"".concat(l,"-wrapper"),style:n,ref:o,noMargin:p},_react["default"].createElement(_ButtonWithMenu.StyledMainButton,{className:"".concat(l,"-button"),color:e,size:x,title:c,onClick:k?void 0:function handleButtonClick(a){var c;return f&&z?void A(a):void("function"==typeof b?b():null!==(c=y[0])&&void 0!==c&&c.onClick&&y[0].onClick())},disabled:k},d||r("saveAs"))),z&&_react["default"].createElement(_ButtonWithMenu.StyledMenu,{className:"".concat(l,"-menu"),anchorEl:v,onClose:B,open:!0,style:m,position:i},g.map(function(a){return a&&_react["default"].createElement(_ButtonWithMenu.StyledMenuItem,{className:"".concat(l,"-menu-item"),key:a.key,active:a.isActive,onClick:function(){return C(a.onClick)},size:x},a.icon&&_react["default"].createElement(_ButtonWithMenu.StyledMenuIcon,{size:x},"string"==typeof a.icon?_react["default"].createElement("span",{dangerouslySetInnerHTML:{__html:a.icon}}):_react["default"].createElement(a.icon,null)),_react["default"].createElement(_menuItem.MenuItemLabel,null,a.label))})))};ButtonWithMenu.defaultProps={title:"",label:"",color:"primary",menuFromBtn:!1,noMargin:!1,menuPosition:"bottom",onClick:void 0,disabled:!1,menuStyle:void 0,wrapperStyle:void 0,buttonRef:void 0};var _default=exports["default"]=ButtonWithMenu;