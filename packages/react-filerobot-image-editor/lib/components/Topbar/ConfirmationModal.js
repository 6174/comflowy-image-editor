"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_react=_interopRequireWildcard(require("react")),_icons=require("@scaleflex/icons"),_hooks=require("../../hooks"),_actions=require("../../actions"),_Modal=_interopRequireDefault(require("../common/Modal")),_constants=require("../../utils/constants");function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}function _interopRequireWildcard(b,c){if(!c&&b&&b.__esModule)return b;if(null===b||"object"!=_typeof(b)&&"function"!=typeof b)return{default:b};var d=_getRequireWildcardCache(c);if(d&&d.has(b))return d.get(b);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in b)if("default"!=a&&Object.prototype.hasOwnProperty.call(b,a)){var g=f?Object.getOwnPropertyDescriptor(b,a):null;g&&(g.get||g.set)?Object.defineProperty(e,a,g):e[a]=b[a]}return e["default"]=b,d&&d.set(b,e),e}var ConfirmationModal=function(a){var b=a.children,c=a.isReset,d=(0,_hooks.useStore)(),e=d.t,f=d.theme,g=d.config,h=d.dispatch,i=d.isResetted,j=d.haveNotSavedChanges,k=d.config.onClose,l=(0,_react.useState)(!1),m=(0,_slicedToArray2["default"])(l,2),n=m[0],o=m[1];if("function"!=typeof k&&!c)return _react["default"].createElement("span",null);var p=function(){o(!1)},q=(0,_react.useCallback)(function(){h({type:_actions.RESET,payload:{config:g}}),p()},[g]),r=function(){c||(k(_constants.CLOSING_REASONS.CLOSE_BUTTON,j),q())};return _react["default"].createElement(_react["default"].Fragment,null,_react["default"].cloneElement(b,{onClick:!(void 0!==i)||i?r:function openModal(){o(!0)}}),n&&_react["default"].createElement(_Modal["default"],{title:c?e("warning"):e("discardChanges"),hint:c?e("changesLoseWarningHint"):e("discardChangesWarningHint"),isOpened:n,onCancel:p,onDone:c?q:r,Icon:function WarningIcon(){return _react["default"].createElement(_icons.Warning,{color:f.palette.warning,size:25})},doneLabel:e("confirm"),doneButtonColor:"warning-primary",cancelLabel:e("cancel"),width:"400px",isWarning:!0}))};ConfirmationModal.defaultProps={isReset:!1};var _default=exports["default"]=ConfirmationModal;