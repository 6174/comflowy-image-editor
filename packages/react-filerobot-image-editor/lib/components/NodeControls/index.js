"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_react=_interopRequireWildcard(require("react")),_iconButton=_interopRequireDefault(require("@scaleflex/ui/core/icon-button")),_deleteOutline=_interopRequireDefault(require("@scaleflex/icons/delete-outline")),_duplicate=_interopRequireDefault(require("@scaleflex/icons/duplicate")),_hooks=require("../../hooks"),_actions=require("../../actions"),_constants=require("../../utils/constants"),_debounce=_interopRequireDefault(require("../../utils/debounce")),_NodeControls=require("./NodeControls.styled");function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}function _interopRequireWildcard(b,c){if(!c&&b&&b.__esModule)return b;if(null===b||"object"!=_typeof(b)&&"function"!=typeof b)return{default:b};var d=_getRequireWildcardCache(c);if(d&&d.has(b))return d.get(b);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in b)if("default"!=a&&Object.prototype.hasOwnProperty.call(b,a)){var g=f?Object.getOwnPropertyDescriptor(b,a):null;g&&(g.get||g.set)?Object.defineProperty(e,a,g):e[a]=b[a]}return e["default"]=b,d&&d.set(b,e),e}var NodeControls=function(){var a=(0,_hooks.useStore)(),b=a.selectionsIds,c=void 0===b?[]:b,d=a.designLayer,e=a.annotations,f=a.dispatch,g=(0,_react.useState)({left:0,top:0}),h=(0,_slicedToArray2["default"])(g,2),i=h[0],j=h[1],k=(0,_react.useMemo)(function(){var a;return null===d||void 0===d||null===(a=d.getStage())||void 0===a?void 0:a.findOne("#".concat(_constants.NODES_TRANSFORMER_ID))},[d]),l=c.length,m=(0,_debounce["default"])(function(){k&&j({left:(k.x()+k.width()/2)*k.scaleX(),top:(k.y()+k.height())*k.scaleY()})},0);if((0,_react.useEffect)(function(){m()},[c,k,e]),0===l||!k)return null;return _react["default"].createElement(_NodeControls.StyledNodeControls,{className:"FIE_annotation-controls-overlay",left:i.left,top:i.top},c[0]!==_constants.WATERMARK_ANNOTATION_ID&&_react["default"].createElement(_iconButton["default"],{color:"basic",size:"sm",onClick:function duplicateSelectedNodes(){f({type:_actions.DUPLICATE_ANNOTATIONS,payload:{annotationsIds:c}})}},_react["default"].createElement(_duplicate["default"],null)),_react["default"].createElement(_iconButton["default"],{color:"basic",size:"sm",onClick:function removeSelectedNodes(){f({type:_actions.REMOVE_ANNOTATIONS,payload:{annotationsIds:c}})}},_react["default"].createElement(_deleteOutline["default"],null)))},_default=exports["default"]=NodeControls;