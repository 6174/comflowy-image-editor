"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_react=_interopRequireWildcard(require("react")),_Layers=require("../Layers"),_context=require("../../context"),_actions=require("../../actions"),_hooks=require("../../hooks"),_NodeControls=_interopRequireDefault(require("../NodeControls")),_CanvasNode=_interopRequireDefault(require("./CanvasNode")),_MainCanvas=require("./MainCanvas.styled");function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}function _interopRequireWildcard(b,c){if(!c&&b&&b.__esModule)return b;if(null===b||"object"!=_typeof(b)&&"function"!=typeof b)return{default:b};var d=_getRequireWildcardCache(c);if(d&&d.has(b))return d.get(b);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in b)if("default"!=a&&Object.prototype.hasOwnProperty.call(b,a)){var g=f?Object.getOwnPropertyDescriptor(b,a):null;g&&(g.get||g.set)?Object.defineProperty(e,a,g):e[a]=b[a]}return e["default"]=b,d&&d.set(b,e),e}var MainCanvas=function(){var a=(0,_hooks.useResizeObserver)(),b=(0,_slicedToArray2["default"])(a,1),c=b[0],d=(0,_hooks.useStore)(),e=(0,_react.useRef)(null),f=(0,_react.useCallback)(function(a){var b=a.width,c=a.height;d.dispatch({type:_actions.SET_CANVAS_SIZE,payload:{canvasWidth:b,canvasHeight:c}})},[]);return(0,_react.useEffect)(function(){c(e.current,f)},[]),_react["default"].createElement(_MainCanvas.CanvasContainer,{className:"FIE_canvas-container",ref:e},!d.textIdOfEditableContent&&_react["default"].createElement(_NodeControls["default"],null),d.isShowOriginalImage&&_react["default"].createElement(_MainCanvas.StyledOrignalImage,{className:"FIE_original-image-compare",src:d.originalImage.src}),_react["default"].createElement(_CanvasNode["default"],null,_react["default"].createElement(_context.AppProviderOverridenValue,{overridingValue:d},_react["default"].createElement(_Layers.DesignLayer,null),_react["default"].createElement(_Layers.TransformersLayer,null))))},_default=exports["default"]=MainCanvas;