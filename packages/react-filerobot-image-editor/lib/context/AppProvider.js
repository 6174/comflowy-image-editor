"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_typeof=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_react=_interopRequireWildcard(require("react")),_hooks=require("@scaleflex/ui/theme/hooks"),_hooks2=require("../hooks"),_translator=require("../utils/translator"),_appReducer=_interopRequireDefault(require("./appReducer")),_AppContext=_interopRequireDefault(require("./AppContext")),_getInitialAppState=_interopRequireDefault(require("./getInitialAppState"));function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}function _interopRequireWildcard(b,c){if(!c&&b&&b.__esModule)return b;if(null===b||"object"!=_typeof(b)&&"function"!=typeof b)return{default:b};var d=_getRequireWildcardCache(c);if(d&&d.has(b))return d.get(b);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in b)if("default"!=a&&Object.prototype.hasOwnProperty.call(b,a)){var g=f?Object.getOwnPropertyDescriptor(b,a):null;g&&(g.get||g.set)?Object.defineProperty(e,a,g):e[a]=b[a]}return e["default"]=b,d&&d.set(b,e),e}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){(0,_defineProperty2["default"])(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}var isFieMounted=!0,AppProvider=function(a){var b=a.children,c=a.config,d=void 0===c?{}:c,e=(0,_hooks2.useAppReducer)(_appReducer["default"],(0,_getInitialAppState["default"])(d),d),f=(0,_slicedToArray2["default"])(e,2),g=f[0],h=f[1];(0,_react.useEffect)(function(){return isFieMounted=!0,function(){isFieMounted=!1}},[]);var i=(0,_react.useCallback)(function(){isFieMounted&&h.apply(void 0,arguments)},[h]);(0,_react.useEffect)(function(){(0,_translator.updateTranslations)(d.translations,d.language)},[d.useBackendTranslations,d.language,d.translations]);var j=(0,_hooks.useTheme)(),k=(0,_react.useMemo)(function(){return _objectSpread(_objectSpread({},g),{},{config:d,theme:j,dispatch:i,t:_translator.translate})},[d,g]);return _react["default"].createElement(_AppContext["default"].Provider,{value:k},b)};AppProvider.defaultProps={config:{}};var _default=exports["default"]=AppProvider;