"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_typeof3=require("@babel/runtime/helpers/typeof");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),_classPrivateFieldGet6=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldGet")),_classPrivateFieldSet2=_interopRequireDefault(require("@babel/runtime/helpers/classPrivateFieldSet")),_react=require("react"),_client=require("react-dom/client"),_reactFilerobotImageEditor=_interopRequireWildcard(require("react-filerobot-image-editor")),_deepMerge=_interopRequireDefault(require("react-filerobot-image-editor/lib/utils/deepMerge"));function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}function _interopRequireWildcard(b,c){if(!c&&b&&b.__esModule)return b;if(null===b||"object"!=_typeof3(b)&&"function"!=typeof b)return{default:b};var d=_getRequireWildcardCache(c);if(d&&d.has(b))return d.get(b);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in b)if("default"!=a&&Object.prototype.hasOwnProperty.call(b,a)){var g=f?Object.getOwnPropertyDescriptor(b,a):null;g&&(g.get||g.set)?Object.defineProperty(e,a,g):e[a]=b[a]}return e["default"]=b,d&&d.set(b,e),e}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){(0,_defineProperty2["default"])(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _classPrivateFieldInitSpec(a,b,c){_checkPrivateRedeclaration(a,b),b.set(a,c)}function _checkPrivateRedeclaration(a,b){if(b.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")}var _root=new WeakMap,_getCurrentImgDataFnRef=new WeakMap,_updateStateFnRef=new WeakMap,FilerobotImageEditor=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if((0,_classCallCheck2["default"])(this,a),_classPrivateFieldInitSpec(this,_root,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_getCurrentImgDataFnRef,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_updateStateFnRef,{writable:!0,value:void 0}),this.container=b,this.config=c,!b||!(b instanceof HTMLElement))throw new Error("`container` (argument 0) is required to initialize the image editor plugin.");(0,_classPrivateFieldSet2["default"])(this,_root,(0,_client.createRoot)(this.container)),(0,_classPrivateFieldSet2["default"])(this,_getCurrentImgDataFnRef,{}),(0,_classPrivateFieldSet2["default"])(this,_updateStateFnRef,{}),this.getCurrentImgData=this.getCurrentImgData.bind(this),this.render=this.render.bind(this),this.terminate=this.terminate.bind(this),this.updateState=this.updateState.bind(this)}return(0,_createClass2["default"])(a,[{key:"render",value:function render(a){"object"===(0,_typeof2["default"])(a)&&(this.config=this.config=(0,_deepMerge["default"])(this.config||{},a)),this.config=_objectSpread(_objectSpread({},this.config),{},{getCurrentImgDataFnRef:(0,_classPrivateFieldGet6["default"])(this,_getCurrentImgDataFnRef),updateStateFnRef:(0,_classPrivateFieldGet6["default"])(this,_updateStateFnRef)}),(0,_classPrivateFieldGet6["default"])(this,_root)._internalRoot||(0,_classPrivateFieldSet2["default"])(this,_root,(0,_client.createRoot)(this.container)),(0,_classPrivateFieldGet6["default"])(this,_root).render((0,_react.createElement)(_reactFilerobotImageEditor["default"],this.config))}},{key:"terminate",value:function terminate(){(0,_classPrivateFieldGet6["default"])(this,_root).unmount()}},{key:"getCurrentImgData",value:function getCurrentImgData(a,b,c){var d,e;return(null===(d=(0,_classPrivateFieldGet6["default"])(this,_getCurrentImgDataFnRef))||void 0===d||null===(e=d.current)||void 0===e?void 0:e.call(d,a,b,c))||{}}},{key:"updateState",value:function updateState(a){var b,c;null===(b=(0,_classPrivateFieldGet6["default"])(this,_updateStateFnRef))||void 0===b||null===(c=b.current)||void 0===c||c.call(b,a)}}]),a}();(0,_defineProperty2["default"])(FilerobotImageEditor,"TABS",_reactFilerobotImageEditor.TABS),(0,_defineProperty2["default"])(FilerobotImageEditor,"TOOLS",_reactFilerobotImageEditor.TOOLS),FilerobotImageEditor.TABS=_reactFilerobotImageEditor.TABS,FilerobotImageEditor.TOOLS=_reactFilerobotImageEditor.TOOLS;var _default=exports["default"]=FilerobotImageEditor;